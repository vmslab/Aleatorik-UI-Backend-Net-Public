<?xml version="1.0" encoding="utf-8" ?>

<sqlMap namespace="AleatorikUI.Services" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://ibatis.apache.org/mapping">

	<resultMaps>
		<resultMap id="rtnMdmDemand"  class="MdmDemand" >
			<result property="demandID"         column="DEMAND_ID"/>
			<result property="itemID"           column="ITEM_ID"/>
			<result property="siteID"           column="SITE_ID"/>
			<result property="bufferID"         column="BUFFER_ID"/>
			<result property="dueDate"          column="DUE_DATE"/>
			<result property="demandQty"        column="DEMAND_QTY"/>
			<result property="demandPriority"   column="DEMAND_PRIORITY"/>
			<result property="custID"           column="CUST_ID"/>
			<result property="demandType"       column="DEMAND_TYPE"/>
			<result property="maxLatenessDay"   column="MAX_LATENESS_DAY"/>
			<result property="maxEarlinessDay"  column="MAX_EARLINESS_DAY"/>
			<result property="createDatetime"   column="CREATE_DATETIME"/>
			<result property="createUser"       column="CREATE_USER"/>
			<result property="updateDatetime"   column="UPDATE_DATETIME"/>
			<result property="updateUser"       column="UPDATE_USER"/>
		</resultMap>
		<resultMap id="rtnMdmDemandProp"  class="MdmDemandProp" >
			<result property="demandID"       column="DEMAND_ID"/>
			<result property="propID"         column="PROP_ID"/>
			<result property="propValue"      column="PROP_VALUE"/>
			<result property="calendarID"     column="CALENDAR_ID"/>
			<result property="createDatetime" column="CREATE_DATETIME"/>
			<result property="createUser"     column="CREATE_USER"/>
			<result property="updateDatetime" column="UPDATE_DATETIME"/>
			<result property="updateUser"     column="UPDATE_USER"/>
		</resultMap>
	</resultMaps>

	<statements>
		<!--SELECT-->
		<select id="MdmDemand.Select" resultMap="rtnMdmDemand">
			SELECT [DEMAND_ID]
				 , [ITEM_ID]
				 , [SITE_ID]
				 , [BUFFER_ID]
				 , [DUE_DATE]
				 , [DEMAND_QTY]
				 , [DEMAND_PRIORITY]
				 , [CUST_ID]
				 , [DEMAND_TYPE]
				 , [MAX_LATENESS_DAY]
				 , [MAX_EARLINESS_DAY]
				 , [CREATE_DATETIME]
				 , [CREATE_USER]
				 , [UPDATE_DATETIME]
				 , [UPDATE_USER]
			  FROM [CFG_DEMAND]
		</select>

		<!--INSERT-->
		<insert id="MdmDemand.Insert" parameterClass="MdmDemand">
			INSERT INTO [CFG_DEMAND]
				 ( [DEMAND_ID]
				 , [ITEM_ID]
				 , [SITE_ID]
				 , [BUFFER_ID]
				 , [DUE_DATE]
				 , [DEMAND_QTY]
				 , [DEMAND_PRIORITY]
				 , [CUST_ID]
				 , [DEMAND_TYPE]
				 , [MAX_LATENESS_DAY]
				 , [MAX_EARLINESS_DAY]
				 , [CREATE_DATETIME]
				 , [CREATE_USER]
				 , [UPDATE_DATETIME]
				 , [UPDATE_USER]
				 ) VALUES
				 ( #demandID#
				 , #itemID#
				 , #siteID#
				 , #bufferID#
				 , #dueDate#
				 , #demandQty#
				 , #demandPriority#
				 , #custID#
				 , #demandType#
				 , #maxLatenessDay#
				 , #maxEarlinessDay#
				 , getdate()
				 , #createUser#
				 , getdate()
				 , #updateUser#
				 )
		</insert>

		<!--UPDATE-->
		<update id="MdmDemand.Update" parameterClass="MdmDemand">
			UPDATE [CFG_DEMAND]
			   SET [DEMAND_ID]         = #demandID#
				 , [ITEM_ID]           = #itemID#
				 , [SITE_ID]           = #siteID#
				 , [BUFFER_ID]         = #bufferID#
				 , [DUE_DATE]          = #dueDate#
				 , [DEMAND_QTY]        = #demandQty#
				 , [DEMAND_PRIORITY]   = #demandPriority#
				 , [CUST_ID]           = #custID#
				 , [DEMAND_TYPE]       = #demandType#
				 , [MAX_LATENESS_DAY]  = #maxLatenessDay#
				 , [MAX_EARLINESS_DAY] = #maxEarlinessDay#
				 , [UPDATE_DATETIME]   = getdate()
				 , [UPDATE_USER]       = #updateUser#
			 WHERE [DEMAND_ID]         = #demandID#
		</update>

		<!--DELETE-->
		<delete id="MdmDemand.Delete" parameterClass="string">
			DELETE
			  FROM [CFG_DEMAND]
			 WHERE [DEMAND_ID]         = #demandID#
		</delete>

		<!--DEMAND PROP -->
		<!--SELECT-->
		<select id="MdmDemandProp.Select" parameterClass="string" resultMap="rtnMdmDemandProp">
			SELECT [DEMAND_ID]
				 , [PROP_ID]
				 , [PROP_VALUE]
				 , [CALENDAR_ID]
				 , [CREATE_DATETIME]
				 , [CREATE_USER]
				 , [UPDATE_DATETIME]
				 , [UPDATE_USER]
			  FROM [CFG_DEMAND_PROP_VALUE]
			 WHERE [DEMAND_ID] = #demandID#
		</select>

		<!--INSERT-->
		<insert id="MdmDemandProp.Insert" parameterClass="MdmDemandProp">
			INSERT INTO [CFG_DEMAND_PROP_VALUE]
			     ( [DEMAND_ID]
			     , [PROP_ID]
			     , [PROP_VALUE]
			     , [CALENDAR_ID]
			     , [CREATE_DATETIME]
			     , [CREATE_USER]
			     , [UPDATE_DATETIME]
			     , [UPDATE_USER]
			     ) VALUES
			     ( #demandID#
			     , #propID#
			     , #propValue#
			     , #calendarID#
			     , getdate()
			     , #createUser#
			     , getdate()
			     , #updateUser#
			     )
		</insert>

		<!--UPDATE-->
		<update id="MdmDemandProp.Update" parameterClass="MdmDemandProp">
			UPDATE [CFG_DEMAND_PROP_VALUE]
			   SET [DEMAND_ID]       = #demandID#
				 , [PROP_ID]         = #propID#
				 , [PROP_VALUE]      = #propValue#
				 , [CALENDAR_ID]     = #calendarID#
				 , [UPDATE_DATETIME] = getdate()
				 , [UPDATE_USER]     = #updateUser#
			 WHERE [DEMAND_ID]       = #demandID#
			   AND [PROP_ID]         = #propID#
		</update>

		<!--DELETE-->
		<delete id="MdmDemandProp.Delete" parameterClass="string">
			DELETE 
			  FROM [CFG_DEMAND_PROP_VALUE]
			 WHERE [DEMAND_ID]       = #demandID#
			   AND [PROP_ID]         = #propID#
		</delete>

	</statements>
</sqlMap>